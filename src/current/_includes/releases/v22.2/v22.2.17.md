## v22.2.17

Release Date: November 16, 2023

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v22-2-17-bug-fixes">Bug fixes</h3>

- Fixed a bug that could prevent RESTORE from working if it was performed during a cluster upgrade. [#112757][#112757]
- Queries with the `st_union` aggregate function could produce incorrect results in some cases due to the query optimizer performing invalid optimizations. This bug has been present since the `st_union` function was introduced in version 20.2.0. [#112796][#112796]
- CockroachDB previously could incorrectly evaluate lookup and index joins into tables with at least 3 column families in some cases (either "non-nullable column with no value" internal error would occur or the query would return incorrect results), and this is now fixed. The bug was introduced in 22.2. [#113109][#113109]
- Fixed a rare internal error in the optimizer that has existed since before version 22.1, which could occur while enforcing orderings between SQL operators. [#113175][#113175]
- A warning for technical advisory 99561 could incorrectly surface when dropping secondary indexes that store primary key columns. [#113004][#113004]

<div class="release-note-contributors" markdown="1">

<h3 id="v22-2-17-contributors">Contributors</h3>

This release includes 16 merged PRs by 12 authors.

</div>

[#112757]: https://github.com/cockroachdb/cockroach/pull/112757
[#112796]: https://github.com/cockroachdb/cockroach/pull/112796
[#113004]: https://github.com/cockroachdb/cockroach/pull/113004
[#113109]: https://github.com/cockroachdb/cockroach/pull/113109
[#113175]: https://github.com/cockroachdb/cockroach/pull/113175
